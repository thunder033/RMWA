<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Audio Visualizer</title>

    <link rel="stylesheet" href="css/theme.css" type="text/css">
    <link rel="stylesheet" href="css/easel.css" type="text/css">
    <link rel="stylesheet" href="css/control-panel.css" type="text/css">
    <link rel="stylesheet" href="css/loader-icon.css" type="text/css"/>

    <script>
        var angular = angular;

        window.addEventListener('load', function(){
            function isES6Supported(){
                'use strict';

                if(typeof Symbol === 'undefined'){
                    return false;
                }

                try {
                    eval('class Test {}');
                    eval('(x=>x)()');
                } catch (e) {
                    return false;
                }

                return true;
            }

            var loadError = document.querySelector('#loadError'),
                    dependencyErrMsg = 'Dependencies failed to load.',
                    unexpectedErrMsg = 'An unexpected error was encountered',
                    es6ErrMsg = 'This app utilizes ES6 features that your browser does not appear to support';

            loadError.innerHTML = angular ? unexpectedErrMsg : dependencyErrMsg;

            if(!isES6Supported()){
                loadError.innerHTML = es6ErrMsg;
                //Add to some sort of load error detection script
                //loadError.className += ' es6-warning-banner';
            }
        });
    </script>

    <script src="../node_modules/angular/angular.min.js"></script>
    <script src="../node_modules/checklist-model/checklist-model.js"></script>
    <script src="priorityQueue.js"></script>

    <script src="audioViz.js"></script>

    <script src="services/scheduler.service.js"></script>
    <script src="services/audio-player.svc.js"></script>
    <script src="services/audio-clip.svc.js"></script>
    <script src="services/visualizer.svc.js"></script>
    <script src="services/easel.svc.js"></script>

    <script src="controllers/control-panel.ctrl.js"></script>
    <script src="controllers/easel.ctrl.js"></script>

    <script src="filters/capitalize.filter.js"></script>

    <script src="directives/loader.directive.js"></script>
    <script src="directives/es6-warning-banner.directive.js"></script>
    <script src="directives/playlist.directive.js"></script>
    <script src="directives/audio-player.directive.js"></script>
    <script src="directives/control-panel.directive.js"></script>
    <script src="directives/easel.directive.js"></script>

</head>
<body>
    <div class="wrapper" ng-app="audio-viz">
        <div id="loadError" class="es6-warning-banner"></div>
        <control-panel></control-panel>
        <easel id="visualizer"></easel>
    </div>
</body>
</html>